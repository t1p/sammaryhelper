# Product Context

## Project Overview
SammaryHelper - это приложение с графическим интерфейсом для автоматизированного анализа и суммаризации диалогов Telegram. Приложение использует API OpenAI для создания кратких содержаний переписок, что позволяет пользователям быстро получать суть обсуждений без необходимости чтения всего диалога.

## Core Components
- **Telegram Client Manager** (`telegram_client.py`): Основной класс для работы с Telegram API, объединяющий функциональность базового клиента, работы с сообщениями и диалогами
- **Telegram Client Base** (`telegram_client_base.py`): Базовый класс для работы с Telegram API
- **Telegram Client Messages** (`telegram_client_messages.py`): Класс для работы с сообщениями в Telegram API
- **Telegram Client Dialogs** (`telegram_client_dialogs.py`): Класс для работы с диалогами в Telegram API
- **GUI** (`gui.py`): Пользовательский интерфейс на основе Tkinter
- **AI Handler** (`ai_handler.py`): Обработка данных с использованием OpenAI API
- **DB Handler** (`db_handler.py`): Управление базой данных PostgreSQL
- **Utils** (`utils.py`): Вспомогательные функции для работы с конфигурацией и настройками

## Technical Stack
- **Python 3.8+**: Основной язык программирования
- **Telethon**: API для работы с Telegram
- **PostgreSQL**: Хранение данных (через asyncpg)
- **Tkinter**: Библиотека для графического интерфейса
- **OpenAI API**: Для генерации суммаризаций и анализа сообщений
- **Asyncio**: Для асинхронной работы с API

## Integration Points
- **Telegram API**: Для получения данных чатов, сообщений и пользователей
- **PostgreSQL**: Локальная база данных для кеширования информации
- **OpenAI API**: Для обработки текстов и генерации суммаризаций

## User Journeys
- Подключение к Telegram аккаунту через клиентское API
- Загрузка и фильтрация диалогов из Telegram
- Поиск сообщений по различным критериям (текст, отправитель, дата)
- Поиск по нескольким чатам одновременно
- Работа с темами в супергруппах
- Генерация кратких содержаний сообщений с использованием моделей OpenAI
- Анализ участников диалога
- Настройка параметров приложения и моделей AI

## Implementation Notes
- Архитектура следует модульному подходу с разделением ответственности
- Используется наследование для организации классов Telegram клиента
- Реализовано кеширование данных в PostgreSQL для оптимизации производительности
- Асинхронное взаимодействие с API для улучшения отзывчивости интерфейса
- Тестирование реализовано в директории `tests/`
- Разработан план оптимизации кеширования для поиска по нескольким чатам
- Реализована система алиасов моделей OpenAI для удобства пользователя
- Добавлена интеллектуальная логика выбора запасных моделей с фильтрацией специализированных моделей
- Реализована обработка различных форматов идентификаторов моделей, включая JSON-строки
- Добавлена проверка на модели, требующие специальных условий (например, аудио-контент)